<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="True" name="HandheldFriendly">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=auto">
    <meta name="theme-color" content="#fff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1c1c1e" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="../assets/style.css?sha256=b6134367c0012e893b4ad7dd64b4ef93683275e4dfe93077071517fe63e96638">
    <link rel="preload" href="../planet.json" as="fetch" type="application/json" crossorigin="anonymous">
    <link rel="preload" href="../rss.xml" as="fetch" type="application/rss+xml" crossorigin="anonymous">
    <title>iOS app &#x7684; Clean Architecture + MVVM &#x67B6;&#x69CB;&#x7684;&#x4E00;&#x500B; Demo</title>
    <script>
      let userAgentRegex = /Planet\/\S*/;
      window.PLANET = {
        visitedFromPlanetClient: !!navigator.userAgent.match(userAgentRegex),
        assetsPrefix: '../',
      };

      function breadcrumb(stubs) {
        let container = document.createElement('div');
        container.classList.add('breadcrumb')
        let inner = document.createElement('div');
        inner.classList.add('breadcrumb-inner');
        container.appendChild(inner);
        
        let avatarHTML = `
          <div class="breadcrumb-avatar">
            <a href="../"><img src="../avatar.png" height="16" class="breadcrumb-avatar-image" border="0" /></a>
          </div>
        `;
        inner.innerHTML = avatarHTML;
        
        if (!stubs || !stubs.length) {
          return;
        }

        const getStubElem = (stub) => {
          let elem;
          if (stub.url) {
            elem = document.createElement('a');
            elem.href = stub.url;
          } else {
            elem = document.createElement('span');
          }
          elem.innerText = stub.text;
          if (stub.classes) {
            elem.classList.add(...stub.classes);
          }
          return elem;
        };

        const getSeparatorElem = () => {
          let elem = document.createElement('span');
          elem.innerText = '›';
          elem.classList.add("chevron");
          return elem;
        }

        inner.append(getStubElem(stubs[0]));
        inner.append(getSeparatorElem());
        for (let i = 1; i < stubs.length; i++)  {
          inner.append(getStubElem(stubs[i]));
          if (i < stubs.length - 1) {
            inner.append(getSeparatorElem());
          }
        }

        let main = document.querySelector('.main');
        main.style.paddingTop = '10px';

        let wrapper = document.querySelector('.wrapper');
        wrapper.insertAdjacentElement('afterbegin', container);
      }
    </script>
    
    <link rel="icon" href="../avatar.png" sizes="144x144">
    <link rel="shortcut icon" href="../favicon.ico" type="image/png">
    
    
<!-- Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="iOS app &#x7684; Clean Architecture + MVVM &#x67B6;&#x69CB;&#x7684;&#x4E00;&#x500B; Demo" />
<meta property="og:site_name" content="&#x8C9D;&#x514B;&#x68EE;&#x7684;&#x5C0F;&#x7AD9;&#x7AD9;" />
<meta property="og:description" content="&#x87A2;&#x5E55;&#x622A;&#x5716; &#x6587;&#x4EF6;&#x67B6;&#x69CB; .
&#x251C;&#x2500;&#x2500; Feature/
&#x2502;   &#x251C;&#x2500;&#x2500; Data/ 
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; Network/
&#x2502;   &#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; CloudUserApi.swift
&#x2502;   &#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; CloudUserRequest.swift
&#x2502;   &#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; CloudUserResponse.swift
&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; Service/
&#x2502;   &#x2502;       &#x2514;&#x2500;&#x2500; CloudApiService.swift
&#x2502;   &#x251C;&#x2500;&#x2500; Domain/ 
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; Entities/
&#x2502;   &#x2502;  ..." />
<meta property="article:published_time" content="2025-10-13T16:00:30+08:00" />

  <meta property="og:image" content="https://k51qzi5uqu5dkymx3ipnb91r0m8hnjzih530mffz139egcnyl71h16cefhr8c6.eth.sucks/52ADB465-3542-4102-AE8C-0BBF437F7A5F/user_list_app_9_21.png" />
  <meta property="og:image:alt" content="iOS app &#x7684; Clean Architecture + MVVM &#x67B6;&#x69CB;&#x7684;&#x4E00;&#x500B; Demo" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="&#x8C9D;&#x514B;&#x68EE;&#x7684;&#x5C0F;&#x7AD9;&#x7AD9;" />
<meta name="twitter:title" content="iOS app &#x7684; Clean Architecture + MVVM &#x67B6;&#x69CB;&#x7684;&#x4E00;&#x500B; Demo" />
<meta name="twitter:description" content="&#x87A2;&#x5E55;&#x622A;&#x5716; &#x6587;&#x4EF6;&#x67B6;&#x69CB; .
&#x251C;&#x2500;&#x2500; Feature/
&#x2502;   &#x251C;&#x2500;&#x2500; Data/ 
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; Network/
&#x2502;   &#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; CloudUserApi.swift
&#x2502;   &#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; CloudUserRequest.swift
&#x2502;   &#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; CloudUserResponse.swift
&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; Service/
&#x2502;   &#x2502;       &#x2514;&#x2500;&#x2500; CloudApiService.swift
&#x2502;   &#x251C;&#x2500;&#x2500; Domain/ 
&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; Entities/
&#x2502;   &#x2502;  ..." />

  <meta name="twitter:image" content="https://k51qzi5uqu5dkymx3ipnb91r0m8hnjzih530mffz139egcnyl71h16cefhr8c6.eth.sucks/52ADB465-3542-4102-AE8C-0BBF437F7A5F/user_list_app_9_21.png" />

<!-- End Open Graph Tags -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.PLANET.visitedFromPlanetClient) {
      

      if(document.getElementById('audio-container')){
        document.querySelector('.audio-container').style.display = 'block';
      }
      if(document.getElementById('footer')){
        document.querySelector('#footer').style.display = 'block';
      }
      console.log("Current article_type: 0")
      
      breadcrumb([
        { text: "貝克森的小站站", url: '../' },
      ]);
      
    } else {

    }
    const todos = document.querySelectorAll('li:has(input[type="checkbox"])');
    let i = 1;
    todos.forEach(item => {
      item.id = "todo-item-" + i;
      i++;
    });
  });
</script>

    
    <style>
  html, body, code {
    font-family: "SF Pro JP", "SF Pro Text", "SF Pro Icons", "Hiragino Kaku Gothic Pro", "ヒラギノ角ゴ Pro W3", メイリオ, Meiryo, "ＭＳ Ｐゴシック", "Helvetica Neue", Helvetica, Arial, sans-serif;
  }
  
  summary {
    cursor: pointer;
  }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/default.min.css">
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/languages/swift.min.js"></script>

<script>hljs.highlightAll();</script>
  </head>
  <body>
    
    <div class="wrapper">
      <div class="main">
      

<h1>iOS app &#x7684; Clean Architecture + MVVM &#x67B6;&#x69CB;&#x7684;&#x4E00;&#x500B; Demo</h1>
<div class="date">13. Oct 2025 at 16:00:30</div>
<div class="content">
  
  
  <h4>螢幕截圖</h4>
<img width="1707" alt="user_list_app_9_21" src="user_list_app_9_21.png">
<h4>文件架構</h4>
<pre><code>.
├── Feature/
│   ├── Data/ 
│   │   ├── Network/
│   │   │   ├── CloudUserApi.swift
│   │   │   ├── CloudUserRequest.swift
│   │   │   └── CloudUserResponse.swift
│   │   └── Service/
│   │       └── CloudApiService.swift
│   ├── Domain/ 
│   │   ├── Entities/
│   │   │   └── UserEntity.swift
│   │   └── UseCases/
│   │       ├── CloudUserUseCase.swift
│   │       └── CloudSyncUseCase.swift
│   ├── Presentation/ 
│   │   └── CloudUserViewModel.swift
│   └── UI/
│       ├── Components/
│       │   ├── UserRowView.swift
│       │   ├── UserRowView.swift
│       │   └── UserRowView.swift
│       └── UserListView.swift
└── UserApp.swift
</code></pre>
<hr />
<h4>App Entry Point</h4>
<details>
<summary>UserApp.swift</summary>
<pre><code>@main
struct UserApp: App {
  var body: some Scene {
    WindowGroup {
      UserListView()
    }
  }
}

#Preview {
  UserListView()
}
</code></pre>
</details>
<hr />
<h4>UI Layer</h4>
<details>
<summary>Feature/UI/UserListView.swift</summary>
<pre><code>import SwiftUI

struct UserListView: View {
  @StateObject private var viewModel = CloudUserViewModel()
  
  var body: some View {
    NavigationView {
      ZStack {
        if viewModel.isLoading {
          ProgressView(&quot;Loading users...&quot;)
        } else if let error = viewModel.errorMessage {
          VStack(spacing: 16) {
            Image(systemName: &quot;exclamationmark.triangle&quot;)
              .font(.system(size: 48))
              .foregroundColor(.orange)
            Text(&quot;Error&quot;)
              .font(.headline)
            Text(error)
              .font(.subheadline)
              .foregroundColor(.secondary)
              .multilineTextAlignment(.center)
              .padding(.horizontal)
            Button(&quot;Retry&quot;) {
              Task {
                await viewModel.loadUsers()
              }
            }
            .buttonStyle(.borderedProminent)
          }
        } else {
          List(viewModel.filteredUsers) { user in
            NavigationLink(destination: UserDetailView(user: user)) {
              UserRowView(user: user)
            }
          }
          .searchable(text: $viewModel.searchText, prompt: &quot;Search users&quot;)
        }
      }
      .navigationTitle(&quot;Users&quot;)
      .toolbar {
        ToolbarItem(placement: .navigationBarTrailing) {
          Button {
            Task {
              await viewModel.syncUsers()
            }
          } label: {
            Image(systemName: &quot;arrow.clockwise&quot;)
          }
          .disabled(viewModel.isLoading)
        }
      }
    }
    .task {
      await viewModel.loadUsers()
    }
  }
}
</code></pre>
</details>
<details>
<summary>Feature/UI/Components/UserRowView.swift</summary>
<pre><code>import SwiftUI

struct UserRowView: View {
  let user: UserEntity
  
  var body: some View {
    VStack(alignment: .leading, spacing: 8) {
      Text(user.name)
        .font(.headline)
      
      HStack {
        Image(systemName: &quot;person.circle&quot;)
          .foregroundColor(.blue)
        Text(user.username)
          .font(.subheadline)
          .foregroundColor(.secondary)
      }
      
      HStack {
        Image(systemName: &quot;building.2&quot;)
          .foregroundColor(.purple)
        Text(user.company)
          .font(.subheadline)
          .foregroundColor(.secondary)
      }
    }
    .padding(.vertical, 4)
  }
}
</code></pre>
</details>
<details>
<summary>Feature/UI/Components/UserDetailView.swift</summary>
<pre><code>import SwiftUI

struct UserDetailView: View {
  let user: UserEntity
  
  var body: some View {
    List {
      Section(&quot;Personal Information&quot;) {
        DetailRow(icon: &quot;person.fill&quot;, title: &quot;Name&quot;, value: user.name)
        DetailRow(icon: &quot;at&quot;, title: &quot;Username&quot;, value: user.username)
        DetailRow(icon: &quot;envelope.fill&quot;, title: &quot;Email&quot;, value: user.email)
        DetailRow(icon: &quot;phone.fill&quot;, title: &quot;Phone&quot;, value: user.phone)
        DetailRow(icon: &quot;globe&quot;, title: &quot;Website&quot;, value: user.website)
      }
      
      Section(&quot;Location&quot;) {
        DetailRow(icon: &quot;location.fill&quot;, title: &quot;City&quot;, value: user.city)
      }
      
      Section(&quot;Company&quot;) {
        DetailRow(icon: &quot;building.2.fill&quot;, title: &quot;Company&quot;, value: user.company)
        VStack(alignment: .leading, spacing: 4) {
          HStack {
            Image(systemName: &quot;quote.opening&quot;)
              .foregroundColor(.blue)
            Text(&quot;Catch Phrase&quot;)
              .font(.subheadline)
              .foregroundColor(.secondary)
          }
          Text(user.catchPhrase)
            .font(.body)
            .italic()
            .padding(.leading, 24)
        }
      }
    }
    .navigationTitle(user.name)
    .navigationBarTitleDisplayMode(.inline)
  }
}
</code></pre>
</details>
<details>
<summary>Feature/UI/Components/DetailRow.swift</summary>
<pre><code>import SwiftUI

struct DetailRow: View {
  let icon: String
  let title: String
  let value: String
  
  var body: some View {
    HStack {
      Image(systemName: icon)
        .foregroundColor(.blue)
        .frame(width: 24)
      VStack(alignment: .leading, spacing: 2) {
        Text(title)
          .font(.caption)
          .foregroundColor(.secondary)
        Text(value)
          .font(.body)
      }
    }
  }
}
</code></pre>
</details>
<hr />
<h4>Presentation Layer</h4>
<details>
<summary>Feature/Presentation/CloudUserViewModel.swift</summary>
<pre><code>import Combine
import Foundation

class CloudUserViewModel: ObservableObject {
  @Published var users: [UserEntity] = []
  @Published var isLoading = false
  @Published var errorMessage: String?
  @Published var searchText = &quot;&quot;
  
  private let getUsersUseCase = CloudUserUseCaseImpl()
  private let syncUseCase = CloudSyncUseCaseImpl()
  
  var filteredUsers: [UserEntity] {
    if searchText.isEmpty {
      return users
    }
    return users.filter { user in
      user.name.localizedCaseInsensitiveContains(searchText) ||
      user.username.localizedCaseInsensitiveContains(searchText) ||
      user.email.localizedCaseInsensitiveContains(searchText) ||
      user.company.localizedCaseInsensitiveContains(searchText)
    }
  }
  
  func loadUsers() async {
    isLoading = true
    errorMessage = nil
    
    do {
      users = try await getUsersUseCase.execute()
    } catch {
      errorMessage = error.localizedDescription
    }
    
    isLoading = false
  }
  
  func syncUsers() async {
    isLoading = true
    errorMessage = nil
    
    do {
      try await syncUseCase.execute()
      users = try await getUsersUseCase.execute()
    } catch {
      errorMessage = error.localizedDescription
    }
    
    isLoading = false
  }
}
</code></pre>
</details>
<hr />
<h4>Domain Layer</h4>
<details>
<summary>Feature/Domain/Entities/UserEntity.swift</summary>
<pre><code>struct UserEntity: Identifiable {
  let id: Int
  let name: String
  let username: String
  let email: String
  let city: String
  let company: String
  let phone: String
  let website: String
  let catchPhrase: String
}
</code></pre>
</details>
<details>
<summary>Feature/Domain/UseCases/CloudUserUseCase.swift</summary>
<pre><code>protocol CloudUserUseCase {
  func execute() async throws -&gt; [UserEntity]
}

class CloudUserUseCaseImpl: CloudUserUseCase {
  private let service: CloudApiService
  
  init(service: CloudApiService = CloudApiServiceImpl()) {
    self.service = service
  }
  
  func execute() async throws -&gt; [UserEntity] {
    let responses = try await service.getUsers()
    return responses.map { response in
      UserEntity(
        id: response.id,
        name: response.name,
        username: response.username,
        email: response.email,
        city: response.address.city,
        company: response.company.name,
        phone: response.phone,
        website: response.website,
        catchPhrase: response.company.catchPhrase
      )
    }
  }
}
</code></pre>
</details>
<details>
<summary>Feature/Domain/UseCases/CloudSyncUseCase.swift</summary>
<pre><code>protocol CloudSyncUseCase {
  func execute() async throws
}

class CloudSyncUseCaseImpl: CloudSyncUseCase {
  private let service: CloudApiService
  
  init(service: CloudApiService = CloudApiServiceImpl()) {
    self.service = service
  }
  
  func execute() async throws {
    try await service.syncUsers()
  }
}
</code></pre>
</details>
<hr />
<h4>Data Layer</h4>
<details>
<summary>Feature/Data/Network/CloudUserRequest.swift</summary>
<pre><code>struct CloudUserRequest: Codable {
  var endpoint: String = &quot;/users&quot;
}
</code></pre>
</details>
<details>
<summary>Feature/Data/Network/CloudUserResponse.swift</summary>
<pre><code>struct CloudUserResponse: Codable {
  let id: Int
  let name: String
  let username: String
  let email: String
  let address: Address
  let phone: String
  let website: String
  let company: Company
  
  struct Address: Codable {
    let street: String
    let suite: String
    let city: String
    let zipcode: String
    let geo: Geo
    
    struct Geo: Codable {
      let lat: String
      let lng: String
    }
  }
  
  struct Company: Codable {
    let name: String
    let catchPhrase: String
    let bs: String
  }
}
</code></pre>
</details>
<details>
<summary>Feature/Data/Network/CloudUserApi.swift</summary>
<pre><code>import Foundation

protocol CloudUserApi {
  func fetchUsers() async throws -&gt; [CloudUserResponse]
}

class CloudUserApiImpl: CloudUserApi {
  private let baseURL = &quot;https://jsonplaceholder.typicode.com&quot;
  
  func fetchUsers() async throws -&gt; [CloudUserResponse] {
    guard let url = URL(string: &quot;\(baseURL)/users&quot;) else {
      throw URLError(.badURL)
    }
    
    let (data, _) = try await URLSession.shared.data(from: url)
    let users = try JSONDecoder().decode([CloudUserResponse].self, from: data)
    return users
  }
}
</code></pre>
</details>
<details>
<summary>Feature/Data/Service/CloudApiService.swift</summary>
<pre><code>protocol CloudApiService {
  func getUsers() async throws -&gt; [CloudUserResponse]
  func syncUsers() async throws
}

class CloudApiServiceImpl: CloudApiService {
  private let api: CloudUserApi
  
  init(api: CloudUserApi = CloudUserApiImpl()) {
    self.api = api
  }
  
  func getUsers() async throws -&gt; [CloudUserResponse] {
    return try await api.fetchUsers()
  }
  
  func syncUsers() async throws {
    _ = try await api.fetchUsers()
  }
}

</code></pre>
</details>

</div>

<div class="tags-container">
<span>Tags:</span>
<div class="tags"><a href="../ios.html" class="tag-item">iOS</a></div>
</div>



        <footer id="footer" style="display: none;"><div class="footer-inner">
        </div></footer>
      </div>
    </div>
    
  </body>
</html>
