<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="True" name="HandheldFriendly">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=auto">
    <meta name="theme-color" content="#fff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1c1c1e" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="../assets/style.css?sha256=b6134367c0012e893b4ad7dd64b4ef93683275e4dfe93077071517fe63e96638">
    <link rel="preload" href="../planet.json" as="fetch" type="application/json" crossorigin="anonymous">
    <link rel="preload" href="../rss.xml" as="fetch" type="application/rss+xml" crossorigin="anonymous">
    <title>&#x4F7F;&#x7528; GPG &#x7C3D;&#x540D; git commits</title>
    <script>
      let userAgentRegex = /Planet\/\S*/;
      window.PLANET = {
        visitedFromPlanetClient: !!navigator.userAgent.match(userAgentRegex),
        assetsPrefix: '../',
      };

      function breadcrumb(stubs) {
        let container = document.createElement('div');
        container.classList.add('breadcrumb')
        let inner = document.createElement('div');
        inner.classList.add('breadcrumb-inner');
        container.appendChild(inner);
        
        let avatarHTML = `
          <div class="breadcrumb-avatar">
            <a href="../"><img src="../avatar.png" height="16" class="breadcrumb-avatar-image" border="0" /></a>
          </div>
        `;
        inner.innerHTML = avatarHTML;
        
        if (!stubs || !stubs.length) {
          return;
        }

        const getStubElem = (stub) => {
          let elem;
          if (stub.url) {
            elem = document.createElement('a');
            elem.href = stub.url;
          } else {
            elem = document.createElement('span');
          }
          elem.innerText = stub.text;
          if (stub.classes) {
            elem.classList.add(...stub.classes);
          }
          return elem;
        };

        const getSeparatorElem = () => {
          let elem = document.createElement('span');
          elem.innerText = 'â€º';
          elem.classList.add("chevron");
          return elem;
        }

        inner.append(getStubElem(stubs[0]));
        inner.append(getSeparatorElem());
        for (let i = 1; i < stubs.length; i++)  {
          inner.append(getStubElem(stubs[i]));
          if (i < stubs.length - 1) {
            inner.append(getSeparatorElem());
          }
        }

        let main = document.querySelector('.main');
        main.style.paddingTop = '10px';

        let wrapper = document.querySelector('.wrapper');
        wrapper.insertAdjacentElement('afterbegin', container);
      }
    </script>
    
    <link rel="icon" href="../avatar.png" sizes="144x144">
    <link rel="shortcut icon" href="../favicon.ico" type="image/png">
    
    
<!-- Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="&#x4F7F;&#x7528; GPG &#x7C3D;&#x540D; git commits" />
<meta property="og:site_name" content="&#x8C9D;&#x514B;&#x68EE;&#x7684;&#x5C0F;&#x7AD9;&#x7AD9;" />
<meta property="og:description" content="&#x76EE;&#x7684; &#x56E0;&#x70BA; git &#x672C;&#x8EAB;&#x5141;&#x8A31;&#x4FEE;&#x6539; commit&#xFF0C;&#x672C;&#x6587;&#x7AE0;&#x6307;&#x5C0E;&#x5982;&#x4F55;&#x5728; macOS &#x4F5C;&#x696D;&#x7CFB;&#x7D71;&#x4E2D;&#x4F7F;&#x7528; GPG &#x5C0D; git &#x63D0;&#x4EA4;&#x9032;&#x884C;&#x6578;&#x5B57;&#x7C3D;&#x540D;&#x3002;&#x900F;&#x904E;&#x9019;&#x7A2E;&#x65B9;&#x5F0F;&#xFF0C;&#x63D0;&#x4EA4;&#x5728; GitHub &#x6216;&#x5176;&#x5B83; git &#x7A0B;&#x5F0F;&#x78BC;&#x7BA1;&#x7406;&#x7CFB;&#x7D71;&#x4E0A;&#x5C07;&#x88AB;&#x6A19;&#x8A18;&#x70BA;&#x5DF2;&#x9A57;&#x8B49;&#xFF0C;&#x5F9E;&#x800C;&#x589E;&#x52A0;&#x63D0;&#x4EA4;&#x7684;&#x53EF;&#x4FE1;&#x5EA6;&#x3002;&#x1F389; &#x914D;&#x7F6E;&#x6B65;&#x9A5F; &#x5B89;&#x88DD; GPG &#x900F;&#x904E; Homebrew &#x5B89;&#x88DD; GPG&#xFF1A; brew install gpg
 &#x5B89;&#x88DD; GPG &#x5DE5;&#x5177;&#xFF0C;&#x4E4B;&#x5F8C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x4F86;&#x751F;&#x6210;&#x548C;&#x7BA1;&#x7406;&#x91D1;&#x9470;&#x5C0D;&#x3002; &#x6AA2;&#x67E5;&#x73FE;&#x6709;&#x7684; GPG &#x91D1;&#x9470; &#x5728;&#x751F;&#x6210;&#x65B0;&#x7684; GPG &#x91D1;&#x9470;&#x5C0D;&#x4E4B;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x6AA2;&#x67E5;&#x662F;&#x5426;&#x5DF2;&#x7D93;&#x5B58;&#x5728; GPG &#x91D1;&#x9470;&#x3002;&#x57F7;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A; gpg --list-secret-keys --..." />
<meta property="article:published_time" content="2025-04-29T19:48:40+08:00" />

  <meta property="og:image" content="https://k51qzi5uqu5dkymx3ipnb91r0m8hnjzih530mffz139egcnyl71h16cefhr8c6.eth.sucks/avatar.png" />
  <meta property="og:image:alt" content="&#x8C9D;&#x514B;&#x68EE;&#x7684;&#x5C0F;&#x7AD9;&#x7AD9;" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="&#x8C9D;&#x514B;&#x68EE;&#x7684;&#x5C0F;&#x7AD9;&#x7AD9;" />
<meta name="twitter:title" content="&#x4F7F;&#x7528; GPG &#x7C3D;&#x540D; git commits" />
<meta name="twitter:description" content="&#x76EE;&#x7684; &#x56E0;&#x70BA; git &#x672C;&#x8EAB;&#x5141;&#x8A31;&#x4FEE;&#x6539; commit&#xFF0C;&#x672C;&#x6587;&#x7AE0;&#x6307;&#x5C0E;&#x5982;&#x4F55;&#x5728; macOS &#x4F5C;&#x696D;&#x7CFB;&#x7D71;&#x4E2D;&#x4F7F;&#x7528; GPG &#x5C0D; git &#x63D0;&#x4EA4;&#x9032;&#x884C;&#x6578;&#x5B57;&#x7C3D;&#x540D;&#x3002;&#x900F;&#x904E;&#x9019;&#x7A2E;&#x65B9;&#x5F0F;&#xFF0C;&#x63D0;&#x4EA4;&#x5728; GitHub &#x6216;&#x5176;&#x5B83; git &#x7A0B;&#x5F0F;&#x78BC;&#x7BA1;&#x7406;&#x7CFB;&#x7D71;&#x4E0A;&#x5C07;&#x88AB;&#x6A19;&#x8A18;&#x70BA;&#x5DF2;&#x9A57;&#x8B49;&#xFF0C;&#x5F9E;&#x800C;&#x589E;&#x52A0;&#x63D0;&#x4EA4;&#x7684;&#x53EF;&#x4FE1;&#x5EA6;&#x3002;&#x1F389; &#x914D;&#x7F6E;&#x6B65;&#x9A5F; &#x5B89;&#x88DD; GPG &#x900F;&#x904E; Homebrew &#x5B89;&#x88DD; GPG&#xFF1A; brew install gpg
 &#x5B89;&#x88DD; GPG &#x5DE5;&#x5177;&#xFF0C;&#x4E4B;&#x5F8C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x4F86;&#x751F;&#x6210;&#x548C;&#x7BA1;&#x7406;&#x91D1;&#x9470;&#x5C0D;&#x3002; &#x6AA2;&#x67E5;&#x73FE;&#x6709;&#x7684; GPG &#x91D1;&#x9470; &#x5728;&#x751F;&#x6210;&#x65B0;&#x7684; GPG &#x91D1;&#x9470;&#x5C0D;&#x4E4B;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x6AA2;&#x67E5;&#x662F;&#x5426;&#x5DF2;&#x7D93;&#x5B58;&#x5728; GPG &#x91D1;&#x9470;&#x3002;&#x57F7;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A; gpg --list-secret-keys --..." />

  <meta name="twitter:image" content="https://k51qzi5uqu5dkymx3ipnb91r0m8hnjzih530mffz139egcnyl71h16cefhr8c6.eth.sucks/avatar.png" />

<!-- End Open Graph Tags -->

<script>
  document.addEventListener('DOMContentLoaded', () => {
    if (!window.PLANET.visitedFromPlanetClient) {
      

      if(document.getElementById('audio-container')){
        document.querySelector('.audio-container').style.display = 'block';
      }
      if(document.getElementById('footer')){
        document.querySelector('#footer').style.display = 'block';
      }
      console.log("Current article_type: 0")
      
      breadcrumb([
        { text: "è²å…‹æ£®çš„å°ç«™ç«™", url: '../' },
      ]);
      
    } else {

    }
    const todos = document.querySelectorAll('li:has(input[type="checkbox"])');
    let i = 1;
    todos.forEach(item => {
      item.id = "todo-item-" + i;
      i++;
    });
  });
</script>

    
    <style>
  html, body, code {
    font-family: "SF Pro JP", "SF Pro Text", "SF Pro Icons", "Hiragino Kaku Gothic Pro", "ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro W3", ãƒ¡ã‚¤ãƒªã‚ª, Meiryo, "ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯", "Helvetica Neue", Helvetica, Arial, sans-serif;
  }
</style>
  </head>
  <body>
    
    <div class="wrapper">
      <div class="main">
      

<h1>&#x4F7F;&#x7528; GPG &#x7C3D;&#x540D; git commits</h1>
<div class="date">Apr 29, 2025 at 19:48:40</div>
<div class="content">
  
  
  <h2>ç›®çš„</h2>
<p>å› ç‚º git æœ¬èº«å…è¨±ä¿®æ”¹ commitï¼Œæœ¬æ–‡ç« æŒ‡å°å¦‚ä½•åœ¨ macOS ä½œæ¥­ç³»çµ±ä¸­ä½¿ç”¨ GPG å° git æäº¤é€²è¡Œæ•¸å­—ç°½åã€‚é€éé€™ç¨®æ–¹å¼ï¼Œæäº¤åœ¨ GitHub æˆ–å…¶å®ƒ git ç¨‹å¼ç¢¼ç®¡ç†ç³»çµ±ä¸Šå°‡è¢«æ¨™è¨˜ç‚ºå·²é©—è­‰ï¼Œå¾è€Œå¢åŠ æäº¤çš„å¯ä¿¡åº¦ã€‚ğŸ‰</p>
<h2>é…ç½®æ­¥é©Ÿ</h2>
<h3>å®‰è£ GPG</h3>
<p>é€é Homebrew å®‰è£ GPGï¼š</p>
<pre><code class="language-ssh">brew install gpg
</code></pre>
<p>å®‰è£ GPG å·¥å…·ï¼Œä¹‹å¾Œå¯ä»¥ä½¿ç”¨å®ƒä¾†ç”Ÿæˆå’Œç®¡ç†é‡‘é‘°å°ã€‚</p>
<p>æª¢æŸ¥ç¾æœ‰çš„ GPG é‡‘é‘°</p>
<p>åœ¨ç”Ÿæˆæ–°çš„ GPG é‡‘é‘°å°ä¹‹å‰ï¼Œé¦–å…ˆæª¢æŸ¥æ˜¯å¦å·²ç¶“å­˜åœ¨ GPG é‡‘é‘°ã€‚åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-ssh">gpg --list-secret-keys --keyid-format LONG
å¦‚æœå‘½ä»¤æ²’æœ‰è¿”å›ä»»ä½•é‡‘é‘°ï¼Œèªªæ˜ä½ é‚„æ²’æœ‰é…ç½® GPG é‡‘é‘°ã€‚
% gpg --list-secret-keys --keyid-format LONG
gpg: directory '/Users/UserName/.gnupg' created
gpg: /Users/UserName/.gnupg/trustdb.gpg: trustdb created
</code></pre>
<p>å¦‚æœè¿”å›äº†é‡‘é‘°è³‡è¨Šï¼Œå‰‡å¯ä»¥è·³éç”Ÿæˆ GPG é‡‘é‘°å°çš„æ­¥é©Ÿã€‚</p>
<pre><code class="language-ssh">% gpg --list-secret-keys --keyid-format LONG
[keyboxd]
---------
sec   ed25519/E7175B0CAF8C4FE0 2024-09-16 [SC]
      *****************
uid                 [ultimate] UserName &lt;email@exmple.com&gt;
ssb   cv25519/88CAD4AB29BCB4B5 2024-09-16 [E]
</code></pre>
<p>å¾Œé¢ä¹Ÿå¯ä»¥é€éé€™æ¢å‘½ä»¤æª¢è¦–å·²æœ‰çš„é‡‘é‘°</p>
<h3>ç”Ÿæˆ GPG é‡‘é‘°å°</h3>
<p>ç”Ÿæˆæ–°é‡‘é‘°å°ï¼š</p>
<pre><code class="language-ssh">gpg --full-generate-key --expert
# ä½¿ç”¨ --expert é¸é …å¯ä»¥æ”¯æ´ ECC 
# åŠ å¯†æ¼”ç®—æ³•ã€‚å¦‚æœé¸æ“‡ RSA æ¼”ç®—æ³•ï¼Œå‰‡ç„¡éœ€ä½¿ç”¨ --expert é¸é …
</code></pre>
<ul>
<li>é¸æ“‡é‡‘é‘°å‹åˆ¥ï¼šé¸æ“‡ (9) ECC (sign and encrypt) <em>default</em></li>
<li>é¸æ“‡æ¼”ç®—æ³•ï¼šé¸æ“‡ (1) Curve 25519</li>
<li>è¨­å®šé‡‘é‘°éæœŸæ™‚é–“ï¼š0 ç‚ºæ°¸ä¸éæœŸ</li>
<li>ç¢ºèªè³‡è¨Š Key is valid for? (0)  Is this correct? (y/N)</li>
<li>è¨­å®šä½¿ç”¨è€… IDï¼šç¢ºä¿éƒµç®±åœ°å€èˆ‡commitéƒµç®±ä¸€è‡´</li>
<li>è¨­å®šå¯†ç¢¼</li>
</ul>
<h3>åŒ¯å‡ºå…¬é‘°</h3>
<p>ç²å–é‡‘é‘°åˆ—è¡¨ï¼š</p>
<pre><code class="language-ssh">gpg --list-secret-keys --keyid-format LONG
</code></pre>
<p>ç¤ºä¾‹è¼¸å‡ºï¼š</p>
<pre><code class="language-ssh">% gpg --list-secret-keys --keyid-format LONG
gpg: checking the trustdb
gpg: marginals needed: 3  completes needed: 1  trust model: pgp
gpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1u
[keyboxd]
---------
sec   ed25519/E7175B0CAF8C4FE0 2024-09-16 [SC]
      *****************
uid                 [ultimate] UserName &lt;email@exmple.com&gt;
ssb   cv25519/88CAD4AB29BCB4B5 2024-09-16 [E]
</code></pre>
<p>è¨˜ä¸‹ sec ed25519/ å¾Œé¢çš„ GPG Key IDï¼Œä¾‹å¦‚ E7175B0CAF8C4FE0</p>
<p>åŒ¯å‡ºå…¬é‘°ï¼š</p>
<pre><code class="language-ssh">gpg --armor --export E7175B0CAF8C4FE0
</code></pre>
<p>å°‡åŒ¯å‡ºçš„å…¬é‘°è¤‡è£½ä¸¦è²¼ä¸Šåˆ° GitHub çš„ GPG é‡‘é‘°æ–°å¢é é¢ä¸Šã€‚</p>
<pre><code class="language-ssh">-----BEGIN PGP PUBLIC KEY BLOCK-----
PUBLIC KEY
-----END PGP PUBLIC KEY BLOCK-----
</code></pre>
<h3>é…ç½® Git</h3>
<p>è¨­å®š gpg-agent ç’°å¢ƒè®Šæ•¸ï¼š</p>
<pre><code class="language-ssh">echo 'export GPG_TTY=$(tty)' &gt;&gt; ~/.zshrc
source ~/.zshrc
</code></pre>
<p>é€™è£¡åªå¯«äº†Oh my zshçš„ï¼Œå…¶å®ƒå·¥å…·è‡ªè¡Œæ”¹ä¸€ä¸‹</p>
<p>é…ç½® Git ä½¿ç”¨ GPG ç°½åï¼š</p>
<p>ç•¶å‰ç›®éŒ„</p>
<pre><code class="language-ssh">git config user.signingkey E7175B0CAF8C4FE0
git config commit.gpgsign true
</code></pre>
<p>å…¨åŸŸæ€§</p>
<pre><code class="language-ssh">git config --global user.signingkey E7175B0CAF8C4FE0
git config --global commit.gpgsign true
</code></pre>
<p>æ³¨æ„æ›¿æ›ç‚ºå¯¦éš›çš„ GPG Key IDã€‚</p>
<p>å°æ–¼ä¸éœ€è¦ GPG ç°½åçš„ Git å€‰åº«ï¼Œé€²å…¥å€‰åº«ç›®éŒ„ä¸¦åŸ·è¡Œï¼š</p>
<pre><code class="language-ssh">git config commit.gpgsign false
</code></pre>
<p>ç¥ç¨‹å¼è¨­è¨ˆæ„‰æ‚…ï¼</p>

</div>

<div class="tags-container">
<span>Tags:</span>
<div class="tags"><a href="../mac.html" class="tag-item">mac</a><a href="../ssh.html" class="tag-item">ssh</a></div>
</div>



        <footer id="footer" style="display: none;"><div class="footer-inner">
        </div></footer>
      </div>
    </div>
    
  </body>
</html>
